"use strict";var checkLicenses=function(){var e=document.getElementById("woostify_license_key_field"),t=document.getElementById("woostify_pro_license_key_submit");e&&t&&(t.onclick=function(a){a.preventDefault();var s=e.value.trim(),i=document.querySelector(".license-key-message");if(!s.length){alert(woostify_pro_dashboard.license_empty);return}t.classList.add("updating-message");var c=new Request(ajaxurl,{method:"POST",body:"action=woostify_pro_check_licenses&ajax_nonce="+woostify_pro_dashboard.ajax_nonce+"&woostify_license_key="+s,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})}),n=function(){i&&(i.innerHTML=woostify_pro_dashboard.receiving,i.classList.remove("not-receiving-updates"),i.classList.add("receiving-updates")),t.innerHTML=woostify_pro_dashboard.deactivate_label,e.disabled=!0},o=function(){i&&(i.innerHTML=woostify_pro_dashboard.not_receiving,i.classList.add("not-receiving-updates"),i.classList.remove("receiving-updates")),t.innerHTML=woostify_pro_dashboard.activate_label,e.disabled=!1},l=function(e){try{JSON.parse(e)}catch(t){return!1}return!0};fetch(c).then(function(e){if(200!==e.status){console.log("Status Code: "+e.status),t.classList.remove("updating-message");return}e.json().then(function(e){for(var t=!1,a="activate",s=0,i=e.length;s<i;s++){if(l(e[s])){var c=JSON.parse(e[s]);c.success&&(c.success&&"valid"===c.license?t=!0:c.success&&"deactivated"===c.license&&(t=!0,a="deactivate"))}}t?"activate"==a?(alert(woostify_pro_dashboard.activate_success_message),n()):(alert(woostify_pro_dashboard.deactivate_success_message),o()):(o(),alert(woostify_pro_dashboard.failure_message))})}).catch(function(e){console.log(e)}).finally(function(){t.classList.remove("updating-message")})})},detectFeature=function(){var e=document.querySelectorAll(".module-item"),t=document.querySelectorAll(".module-item.activated");if(e.length){var a=e.length==t.length?"yes":"",s=new Request(ajaxurl,{method:"POST",body:"action=all_feature_activated&detect="+a+"&ajax_nonce="+woostify_pro_dashboard.ajax_nonce,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})});fetch(s)}},moduleAction=function(){var e=document.querySelector(".woostify-module-list"),t=document.querySelector(".woostify-module-info-list");if(e||t){var a=document.querySelector(".woostify-save-message"),s=t.querySelectorAll(".module-info-item"),i=e.querySelectorAll(".module-item");i.length&&i.forEach(function(i){var c=i.querySelectorAll(".module-checkbox");c&&(c[0].checked=!1,i.classList.contains("activated")&&(c[0].checked=!0),c[0].onclick=function(){var n=c[0].closest(".module-item"),o=(n.getAttribute("data-module-cat"),c[0].value),l=c[0].getAttribute("data-status"),d=woostify_pro_dashboard.activating;"activated"===l&&(d=woostify_pro_dashboard.deactivating);var r=new Request(ajaxurl,{method:"POST",body:"action=module_action&name="+o+"&status="+l+"&ajax_nonce="+woostify_pro_dashboard.ajax_nonce,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})});e.classList.add("loading"),n.classList.add("loading"),fetch(r).then(function(e){if(200!==e.status){console.log("Status Code: "+e.status);return}e.json().then(function(e){if(e.success){var l="";siblings(i);var d=!1;c[0].setAttribute("data-status",e.data.status),n.classList.contains("deactivated")&&"deactivated"!=e.data.status?(n.classList.remove("deactivated"),d=!0):n.classList.remove("activated"),n.classList.add(e.data.status),l=siblings(n),s.forEach(function(t){t.classList.contains(o)&&(t.classList.contains("deactivated")&&"deactivated"!=e.data.status?t.classList.remove("deactivated"):t.classList.remove("activated"),t.classList.add(e.data.status))}),a.classList.add("success"),a.querySelector(".message-success").innerHTML=woostify_edit_screen.saved_success,setTimeout(function(){a.classList.remove("success")},3e3),l.forEach(function(e){e.classList.contains("activated")&&(d=!0)}),d?t.classList.remove("show-default"):t.classList.add("show-default"),detectFeature()}})}).finally(function(){e.classList.remove("loading"),n.classList.remove("loading")})})})}},multiModuleAction=function(){var e=document.querySelectorAll(".woostify-select-module-all"),t=document.querySelectorAll(".module-item:not(.disabled)"),a=document.querySelector(".woostify-module-info-list"),s=document.querySelector(".woostify-save-message");e&&t.length&&e.forEach(function(e){e.onclick=function(){var e=this.closest(".woostify-select-module-all-switch"),i=siblings(e),c=this.getAttribute("data-module-cat"),n=this.getAttribute("data-module-action"),o=[],l=a.querySelectorAll(".module-info-item"+("all"!=c?"."+c:""));this.checked?(e.classList.add("active-all"),i.length&&i.forEach(function(e){e.classList.remove("active-all"),void 0!==e.children[0]&&(e.children[0].checked=!1)})):e.classList.remove("active-all"),t.forEach(function(e){var t=e.querySelector(".module-checkbox"),a=t.getAttribute("data-status").trim(),s=t.value,i=[];if(e.classList.contains(".loading")){alert("Process running.");return}""!=n&&n!==a&&(e.classList.contains(c)||"all"==c)&&(i={name:s,status:a},o.push(i),e.classList.add("loading"),t.setAttribute("data-status",a),"deactivated"==a?t.checked=!0:t.checked=!1)});var d=new Request(ajaxurl,{method:"POST",body:"action=module_action_all&module_actions="+JSON.stringify(o)+"&ajax_nonce="+woostify_pro_dashboard.ajax_nonce,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})});fetch(d).then(function(e){if(200!==e.status){console.log("Status Code: "+e.status);return}e.json().then(function(e){if(e.success&&0!=e.data.length){var i=!1;s.classList.add("success"),setTimeout(function(){s.classList.remove("success")},3e3),t.forEach(function(t,a){if(t.classList.contains(c)||"all"==c){var s=t.querySelector(".module-checkbox"),n=s.value;e.data.forEach(function(e){n==e.name&&("activated"==e.status?(s.checked=!0,i=!0):s.checked=!1,s.setAttribute("data-status",e.status),l.forEach(function(t){t.classList.contains(e.name)&&(t.className="",t.classList.add("module-info-item",c,e.name,e.status))}))})}}),l.forEach(function(e){e.classList.contains("activated")&&(i=!0)}),i?a.classList.remove("show-default"):a.classList.add("show-default"),detectFeature()}})}).finally(function(){t.forEach(function(e){e.classList.remove("loading")})})}})},goToAddOnsTab=function(){var e=document.querySelector(".activate-add-ons");e&&e.addEventListener("click",function(e){var t=document.querySelector('[href="#'+this.getAttribute("data-tab")+'"]'),a=siblings(t);t.classList.add("active"),a.length&&a.forEach(e=>{e.classList.remove("active")})})},addOnsTabs=function(){var e=document.querySelector(".woostify-module-addons-tabs");if(e){var t=e.querySelectorAll(".tab-module-button");t&&t.forEach(function(e){e.onclick=function(){var t=siblings(e),a=document.querySelectorAll(".woostify-module-list .module-item"),s=e.getAttribute("data-module-cat"),i=document.getElementById("add-ons-active-all"),c=document.querySelectorAll(".woostify-select-module-all");i.setAttribute("data-multi-cat",s),e.classList.add("active"),t.length&&t.forEach(function(e){e.classList.remove("active")}),a.forEach(function(e){e.classList.contains(s)?e.style.display="flex":e.style.display="none","all"===s&&(e.style.display="flex")}),c.forEach(function(e){e.setAttribute("data-module-cat",s),e.checked=!1,e.closest(".woostify-select-module-all-switch").classList.remove("active-all")})}})}},closeMessageSuccessAddons=function(){var e=document.querySelector(".woostify-save-message-close");e&&e.addEventListener("click",function(e){this.closest(".woostify-save-message").classList.remove("success")})},showChangelog=function(){var e=document.querySelector(".changelog-woostify-wrapper"),t=e.querySelectorAll(".changelog-woostify-version");e.querySelectorAll(".page-numbers").forEach(function(e,a){var s=e.querySelectorAll(".page-number"),i=e.getAttribute("data-changelog-product"),c=e.getAttribute("data-per-page"),n=e.getAttribute("data-total-pages"),o=e.querySelector(".page-pre"),l=e.querySelector(".page-next"),d=e.querySelector(".dots"),r=e.querySelector(".page-number.active");s.forEach(function(s){s.onclick=function(){var u=siblings(s),v=this.getAttribute("data-page-number");v=parseFloat(v),r=this,s.classList.add("active");var f=1;if(u.length){u.forEach(function(e){e.classList.remove("active"),e.classList.remove("actived")});for(var g=1;g<=5;g++)f<=5&&(v-g>0&&e.children[v-g]&&(e.children[v-g].classList.add("actived"),f++),e.children[v+g-1]&&(e.children[v+g-1].classList.add("actived"),f++));v-1!=0?o.classList.remove("disable"):o.classList.add("disable"),parseFloat(n)-v>=2?l.classList.remove("disable"):l.classList.add("disable"),parseFloat(n)-v<=2?d.classList.add("hide"):d.classList.remove("hide")}var h=new Request(ajaxurl,{method:"POST",body:"action=changelog_pagination&page="+parseInt(v)+"&per_page="+c+"&product_id="+i+"&ajax_nonce="+woostify_pro_dashboard.ajax_nonce,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})});t[a].classList.add("loading"),fetch(h).then(function(e){if(200!==e.status){console.log("Status Code: "+e.status);return}e.json().then(function(e){if(e.success&&0!=e.data.length){var s="",i=["January","February","March","April","May","June","July","August","September","October","November","December"];e.data.forEach(function(e,t){var a=new Date(e.date),c=a.getDay(),n=i[a.getMonth()],o=a.getFullYear();s+='<li class="changelog-item">',s+='<div class="changelog-version-heading">',s+="<span>"+e.title.rendered+"</span>",s+='<span class="changelog-version-date">'+n+" "+c+", "+o+"</span>",s+="</div>",s+='<div class="changelog-version-content">',s+=e.content.rendered,s+="</div>",s+="</li>"}),t[a].innerHTML=s}})}).finally(function(){t[a].classList.remove("loading")})}}),o.addEventListener("click",function(){var s=parseFloat(r.getAttribute("data-page-number"));if(0!=(s-=1)){var u=siblings(r=e.children[s]),v=1;if(r.classList.add("active"),u.length){u.forEach(function(e){e.classList.remove("active"),e.classList.remove("actived")});for(var f=1;f<=5;f++)v<=5&&(s-f>0&&e.children[s-f]&&(e.children[s-f].classList.add("actived"),v++),e.children[s+f-1]&&(e.children[s+f-1].classList.add("actived"),v++));s-1!=0?o.classList.remove("disable"):o.classList.add("disable"),parseFloat(n)-s>=2?l.classList.remove("disable"):l.classList.add("disable"),parseFloat(d.getAttribute("data-last-pages"))-s>=2?d.classList.add("hide"):d.classList.remove("hide")}var g=new Request(ajaxurl,{method:"POST",body:"action=changelog_pagination&page="+parseInt(s)+"&per_page="+c+"&product_id="+i+"&ajax_nonce="+woostify_pro_dashboard.ajax_nonce,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})});t[a].classList.add("loading"),fetch(g).then(function(e){if(200!==e.status){console.log("Status Code: "+e.status);return}e.json().then(function(e){if(e.success&&0!=e.data.length){console.log(e.data);var s="",i=["January","February","March","April","May","June","July","August","September","October","November","December"];e.data.forEach(function(e,t){var a=new Date(e.date),c=a.getDay(),n=i[a.getMonth()],o=a.getFullYear();s+='<li class="changelog-item">',s+='<div class="changelog-version-heading">',s+="<span>"+e.title.rendered+"</span>",s+='<span class="changelog-version-date">'+n+" "+c+", "+o+"</span>",s+="</div>",s+='<div class="changelog-version-content">',s+=e.content.rendered,s+="</div>",s+="</li>"}),t[a].innerHTML=s}})}).finally(function(){t[a].classList.remove("loading")})}}),l.addEventListener("click",function(){var s=parseFloat(r.getAttribute("data-page-number"));if(s+=1,parseFloat(n)-s!=0){var u=siblings(r=e.children[s]),v=1;if(r.classList.add("active"),u.length){u.forEach(function(e){e.classList.remove("active"),e.classList.remove("actived")});for(var f=1;f<=5;f++)v<=5&&(s-f>0&&e.children[s-f]&&(e.children[s-f].classList.add("actived"),v++),e.children[s+f-1]&&(e.children[s+f-1].classList.add("actived"),v++));s-1!=0?o.classList.remove("disable"):o.classList.add("disable"),parseFloat(n)-s>=2?l.classList.remove("disable"):l.classList.add("disable"),parseFloat(d.getAttribute("data-last-pages"))-s>=2?d.classList.add("hide"):d.classList.remove("hide")}var g=new Request(ajaxurl,{method:"POST",body:"action=changelog_pagination&page="+parseInt(s)+"&per_page="+c+"&product_id="+i+"&ajax_nonce="+woostify_pro_dashboard.ajax_nonce,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})});t[a].classList.add("loading"),fetch(g).then(function(e){if(200!==e.status){console.log("Status Code: "+e.status);return}e.json().then(function(e){if(e.success&&0!=e.data.length){var s="",i=["January","February","March","April","May","June","July","August","September","October","November","December"];e.data.forEach(function(e,t){var a=new Date(e.date),c=a.getDay(),n=i[a.getMonth()],o=a.getFullYear();s+='<li class="changelog-item">',s+='<div class="changelog-version-heading">',s+="<span>"+e.title.rendered+"</span>",s+='<span class="changelog-version-date">'+n+" "+c+", "+o+"</span>",s+="</div>",s+='<div class="changelog-version-content">',s+=e.content.rendered,s+="</div>",s+="</li>"}),t[a].innerHTML=s}})}).finally(function(){t[a].classList.remove("loading")})}})})};document.addEventListener("DOMContentLoaded",function(){checkLicenses(),moduleAction(),multiModuleAction(),goToAddOnsTab(),addOnsTabs(),closeMessageSuccessAddons(),showChangelog()});