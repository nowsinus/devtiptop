"use strict";var woostifySearchDelay=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(e,t){clearTimeout(a),a=setTimeout(e,t)}}();function woostifyAjaxProductSearch(){var a,e,t=document.querySelectorAll(".search-field");a={link:"aps-link",image:"aps-thumbnail",itemTag:'<div class="aps-item">',contentTag:'<div class="asp-content">',priceTag:'<div class="aps-price">',titleTag:'<h4 class="aps-title">',skuTag:'<div class="aps-sku">',closeTag:"</div>",titleClose:"</h4>",categoryClass:'<div class="category-content">',headerTag:'<div class="search-heading">'},e={dataHtml:function(a,e){var t,s,r="",o=this,c=jQuery(e).find(".search-dialog-count"),i=a.products,l=a.categories,n=a.tags,d=a.attributes;if(jQuery(".link-search-page").html(a.product_found+" "+woostify_ajax_product_search_data.products),l&&l.length>0){for(r+=o.categoryClass+o.headerTag+woostify_ajax_product_search_data.categories+o.closeTag,t=0,s=l.length;t<s;t++)u=l[t],r+=o.itemTag+'<a class="'+o.link+'" href="'+u.url+'"></a>'+o.contentTag+o.titleTag+u.name_hightline+o.titleClose+o.closeTag+o.closeTag;r+=o.closeTag}if(n&&n.length>0){for(r+=o.categoryClass+o.headerTag+woostify_ajax_product_search_data.tags+o.closeTag,t=0,s=n.length;t<s;t++){var u=n[t];r+=o.itemTag+'<a class="'+o.link+'" href="'+u.url+'"></a>'+o.contentTag+o.titleTag+u.name_hightline+o.titleClose+o.closeTag+o.closeTag}r+=o.closeTag}if(d&&d.length>0){for(r+=o.categoryClass+o.headerTag+woostify_ajax_product_search_data.attributes+o.closeTag,t=0,s=d.length;t<s;t++){u=d[t];r+=o.itemTag+'<a class="'+o.link+'" href="'+u.url+'"></a>'+o.contentTag+o.titleTag+u.name_hightline+o.titleClose+o.closeTag+o.closeTag}r+=o.closeTag}if(a.products.length>0){if(c.length>0)c.html(a.product_found+" "+woostify_ajax_product_search_data.products);else{var h='<span class="search-dialog-count aps-highlight">'+a.product_found+" "+woostify_ajax_product_search_data.products+"</span>";jQuery(".dialog-search-title").append(h)}for(r+=o.categoryClass+o.headerTag+woostify_ajax_product_search_data.products+o.closeTag,t=0,s=i.length;t<s;t++){var g="";(u=i[t]).sku_hightline&&(g="SKU: "),r+=o.itemTag+'<a class="'+o.link+'" href="'+u.url+'"></a><img class="'+o.image+'" src="'+u.image+'" alt="'+u.name+'">'+o.contentTag+o.titleTag+u.name_hightline+o.titleClose+o.priceTag+u.html_price+o.closeTag+o.skuTag+g+u.sku_hightline+o.closeTag+o.closeTag+o.closeTag}r+=o.closeTag,e.querySelector(".ajax-search-results").innerHTML=r}e.querySelector(".ajax-search-results").innerHTML=r,0==a.products.length&&(!n||n&&0==n.length)&&(!l||l&&0==l.length)&&(e.querySelector(".ajax-search-results").innerHTML='<div class="aps-no-posts-found">'+woostify_ajax_product_search_data.no_product+"</div>",c.html(""))}},t.length&&"undefined"!=typeof woostify_ajax_product_search_data&&t.forEach((function(t){var s=t.closest("form"),r=!!s&&s.classList.contains("woocommerce-product-search"),o=!!s&&s.querySelector(".search-field");if(s&&r&&o){o.setAttribute("autocomplete","off");var c=s.closest(".site-search")||s.closest(".dialog-search-content"),i=!!c&&c.querySelector(".ajax-search-results");if(i){var l=document.createElement("span");if(l.setAttribute("class","clear-search-results ti-close"),o.parentNode.insertBefore(l,o.nextSibling),woostify_ajax_product_search_data.lang){var n=document.createElement("input");n.setAttribute("type","hidden"),n.setAttribute("name","lang"),n.setAttribute("value",woostify_ajax_product_search_data.lang),o.parentNode.insertBefore(n,o.nextSibling)}woostify_ajax_product_search_data.select&&(s.insertAdjacentHTML("afterbegin",woostify_ajax_product_search_data.select),s.classList.add("category-filter"));var d=s.querySelector(".ajax-product-search-category-filter"),u=s.querySelector("input[name=lang]"),h=function(){var t=void 0!==arguments[0]&&arguments[0],r=d?d.value.trim():"",n=u?u.value.trim():"",h=o.value.trim();if(!h)return l.classList.remove("show"),i.classList.add("hide"),jQuery(c).find(".total-result-wrapper").html(""),void jQuery(c).find(".search-dialog-count").html("");l.classList.add("show"),i.classList.remove("hide"),l.onclick=function(){o.value="",l.classList.remove("show"),i.classList.add("hide"),jQuery(c).find(".total-result-wrapper").html(""),jQuery(c).find(".search-dialog-count").html("")};var g=o.getAttribute("data-value");if(h!==g||t){var _;o.setAttribute("data-value",h),s.classList.add("loading"),_=jQuery(s).attr("action")+"?post_type=product&s="+h,r&&(_+="&cat_id="+r),n&&(_+="&lang="+n);var f={token:woostify_ajax_product_search_data.ajax_nonce,keyword:h,cat_id:r,lang:n},p=woostify_ajax_product_search_data.url;woostify_ajax_product_search_data.code_snippets&&(p=woostify_ajax_product_search_data.ajax_url,f.action="ajax_product_search",f.ajax_nonce=woostify_ajax_product_search_data.ajax_nonce),jQuery.ajax({type:"GET",url:p,data:f,beforeSend:function(a){jQuery(s).addClass("loading")},success:function(t){jQuery(s).removeClass("loading"),jQuery(c).find(".total-result-wrapper").html(""),t.data.products.length>0&&jQuery(c).find(".total-result-wrapper").html('<a href="'+_+'" class="link-search-page aps-highlight">'+t.data.size+woostify_ajax_product_search_data.products+"</a>"),e.dataHtml.call(a,t.data,c),jQuery(document).on("keyup keypress",(function(a){if(13===(a.keyCode||a.which)){if(a.preventDefault(),0==t.data.products.length)return!1;window.location.href=_}}))}})}};o.addEventListener("input",(function(){woostifySearchDelay((function(){h()}),500)})),d&&d.addEventListener("change",(function(){h(!0),o.focus()}))}}}))}document.addEventListener("DOMContentLoaded",(function(){woostifyAjaxProductSearch()}));