"use strict";function woostifyQuickViewVariation(){var e=jQuery("#woostify-quick-view-panel .variations_form");e.length&&(e.wc_variation_form(),e.find(".variations select").change(),"function"==typeof woostifyVariationSwatches?woostifyVariationSwatches():void 0!==jQuery.fn.tawcvs_variation_swatches_form&&e.tawcvs_variation_swatches_form())}function woostifyQuickViewSlider(){var e=document.getElementById("quick-view-gallery"),t=get_svg_icon("angle-left"),i=get_svg_icon("angle-right");if(e&&e.classList.contains("quick-view-slider")){var o=tns({loop:!1,container:"#quick-view-gallery",items:1,mouseDrag:!0,controlsText:[t,i]}),n=e.closest(".tns-outer").querySelector(".tns-controls");n.querySelector('button[data-controls="prev"]').innerHTML=t,n.querySelector('button[data-controls="next"]').innerHTML=i,jQuery(document.body).on("found_variation","form.variations_form",function(e,t){o.goTo("first")}),jQuery(".reset_variations").on("click",function(){o.goTo("first")})}}function woostifyQuickViewClose(){document.documentElement.classList.remove("quick-view-open")}function woostifyQuickView(){var e=document.querySelectorAll(".product-quick-view-btn"),t=document.getElementById("woostify-quick-view-panel"),i=!!t&&t.querySelector(".quick-view-content"),o=!!t&&t.querySelector(".quick-view-close-btn");if(e.length)for(var n=0,c=e.length;n<c;n++)e[n].onclick=function(){var e=this,n=e.getAttribute("data-pid");if(n===(!!t&&t.getAttribute("data-view_id"))){document.documentElement.classList.add("quick-view-open");return}i.innerHTML="",document.documentElement.classList.add("quick-view-open","quick-viewing"),document.body.addEventListener("keyup",function(e){27===e.keyCode&&woostifyQuickViewClose()}),o.addEventListener("click",function(){woostifyQuickViewClose()}),t.addEventListener("click",function(e){this===e.target&&woostifyQuickViewClose()}),t.setAttribute("data-view_id",n),fetch(new Request(woostify_quick_view_data.ajax_url,{method:"POST",body:"action=shop_quick_view&ajax_nonce="+woostify_quick_view_data.ajax_nonce+"&product_id="+n,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})})).then(function(t){if(200!==t.status){alert(woostify_quick_view_data.ajax_error),console.log("Status Code: "+t.status);return}t.json().then(function(t){document.documentElement.classList.remove("quick-viewing"),i.innerHTML=t.content;let o=e.closest(".product-loop-wrapper").querySelector(".price"),n=i.querySelector(".has-bm-price .price");o&&n&&(n.innerHTML=o.innerHTML);var c=document.querySelector(".shop-quick-view .woocommerce-review-link");if(c&&c.setAttribute("href",t.review_link),"function"==typeof customQuantity&&customQuantity(),woostifyQuickViewSlider(),woostifyQuickViewVariation(),"function"==typeof woostifyCountdownUrgency&&woostifyCountdownUrgency(),"function"==typeof woostifyCountdownPreorder&&woostifyCountdownPreorder(),"function"==typeof productVariation&&productVariation(".quick-view-images","#woostify-quick-view-panel form.variations_form"),"function"==typeof woostifyAjaxSingleAddToCartButton)woostifyAjaxSingleAddToCartButton();else{var r=document.querySelector(".quick-view-content form.cart");r&&r.setAttribute("action","")}"function"==typeof woostifyBuyNowProduct&&woostifyBuyNowProduct(!0),"function"==typeof woostifyStockQuantityProgressBar&&setTimeout(function(){woostifyStockQuantityProgressBar()},200)})}).catch(function(e){alert(woostify_quick_view_data.ajax_error),console.log(e)}).finally(function(){let e=new Event("woostify_quickview_displayed",{bubbles:!0});document.dispatchEvent(e)})}}document.addEventListener("DOMContentLoaded",function(){woostifyQuickView()});