"use strict";var callbackPopupOpen=function(){document.querySelector("#woostify-callback-form-quick-view").classList.add("quick-view-open")},callbackPopupClose=function(){document.querySelector("#woostify-callback-form-quick-view").classList.remove("quick-view-open")};function woostifyCallbackProduct(){var e=document.querySelectorAll("#btn-callback-form-popup"),t=(document.querySelector("#woostify-callback-form-quick-view .woostify-callback-form-inner"),e.length>0&&void 0!==e[0]),o=document.querySelectorAll("#woostify-callback-form");if(1==t&&(o=document.querySelectorAll("#woostify-callback-form-quick-view"),e[0].addEventListener("click",(function(e){e.preventDefault(),callbackPopupOpen()}))),o.length)for(var a=0,c=o.length;a<c;a++)if(!o[a].classList.contains("grouped_form")){o[a].addEventListener("click",(function(e){o&&o[0].addEventListener("click",(function(e){this===e.target&&callbackPopupClose()}))}));var r=o[a],l=r.querySelector('[name="callback_name"]'),n=r.querySelector('[name="callback_email"]'),u=r.querySelector('[name="callback_phone_number"]'),i=r.querySelector('[name="callback_product_id"]'),s=r.querySelector('[name="callback_variation_id"]'),p=r.querySelector(".g-recaptcha"),d=r.querySelector(".form-input").getAttribute("data-name-hide"),y=r.querySelector(".form-input").getAttribute("data-show-phone"),f=r.querySelector(".form-input").getAttribute("data-show-agree"),k=r.querySelector('[name="callback_agree_checkbox_input"]'),_=r.querySelector(".callback_product_button");if(!_)return;_.addEventListener("click",(function(e){e.preventDefault();const a=new FormData;a.append("action","woostify_callback_ajax_create_post"),a.append("security",woostify_callback.security),null!=p&&"undefined"!=p&&a.append("g-recaptcha-response",grecaptcha.getResponse()),1!=d&&a.append("name",l.value),a.append("email",n.value),1==y&&a.append("phone",u.value),1==f&&k.checked&&a.append("agree",k.value),a.append("product_id",i.value),a.append("variation_id",s.value),this.style.opacity="0.5",this.style.pointerEvents="none",fetch(woostify_callback.ajax_url,{method:"POST",credentials:"same-origin",body:a}).then((function(e){if(200!==e.status)throw console.log("Status Code: "+e.status),e;return e.json()})).then((function(e){e.success?(1==t&&(setTimeout(callbackPopupClose,3e3),setTimeout((function(){o[0].querySelector(".callback_product_output_error").innerHTML=""}),3e3)),1!=d&&(l.value=""),n.value="",1==y&&(u.value=""),1==f&&(k.value=""),_.style.opacity="1",_.style.pointerEvents="all",o[0].querySelector(".callback_product_output_error").style.color="green",o[0].querySelector(".callback_product_output_error").innerHTML=e.data):(_.style.opacity="1",_.style.pointerEvents="all",o[0].querySelector(".callback_product_output_error").style.color="red",o[0].querySelector(".callback_product_output_error").innerHTML=e.data)})).catch((function(e){console.log(e)}))}))}}document.addEventListener("DOMContentLoaded",(function(){woostifyCallbackProduct();var e=jQuery("form.variations_form");jQuery("body");e.on("show_variation hide_variation found_variation",(function(e){e.preventDefault(),woostifyCallbackProduct()}))}));